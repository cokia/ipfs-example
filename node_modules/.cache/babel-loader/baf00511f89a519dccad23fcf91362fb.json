{"ast":null,"code":"'use strict';\n\nconst TransformStream = require('readable-stream').Transform;\n\nconst pingMessageConverter = require('./ping-message-converter');\n\nclass PingMessageStream extends TransformStream {\n  constructor(options) {\n    const opts = Object.assign(options || {}, {\n      objectMode: true\n    });\n    super(opts);\n  }\n\n  _transform(obj, enc, callback) {\n    try {\n      const msg = pingMessageConverter(obj);\n      this.push(msg);\n\n      if (!msg.success) {\n        throw new Error(msg.text);\n      }\n    } catch (err) {\n      return callback(err);\n    }\n\n    callback();\n  }\n\n}\n\nmodule.exports = PingMessageStream;","map":null,"metadata":{},"sourceType":"script"}